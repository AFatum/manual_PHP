<a name="Up"></a>

## RSS
 + [Структура RSS-документа](#struct);
 + [Класс (метод класса) создания RSS](#classRSS);


***
### <a name="struct"></a> Структура RSS-документа
[Наверх](#Up) 

Вот пример обычного xml файла с rss лентой - rss.xml
```html
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
  <channel>
    <title>Новостная лента</title>
    <link>http://test.ua/oop/news/news.php</link>
    <item>
      <title><![CDATA[Роулинг анонсировала пять фильмов о мире Гарри Поттера]]></title>
      <link>#</link>
      <description><![CDATA[Экранизация романа Джоан Роулинг «Фантастические звери и места их обитания» будет состоять из пяти фильмов вместо трех, как предполагалось ранее. Об этом автор британская писательница сообщила в четверг, 13 октября, передает Reuters.

«Я подтверждаю, что будет пять новых фильмов», — заявила автор поттерианы. Все части будут сняты на студии Warner Bros.]]></description>
      <pubDate>Fri, 14 Oct 2016 02:27:52 +0300</pubDate>
      <category>Культура</category>
    </item>
    <item>
      <title><![CDATA[По дорожке]]></title>
      <link>#</link>
      <description><![CDATA[Британский боксер-тяжеловес Тайсон Фьюри знаменит не только и не столько победами на ринге, сколько агрессивным и вызывающим поведением за его пределами. Недавно спортсмен принял решение отказаться от двух поясов чемпиона мира по версиям WBO и WBA, мотивируя свой поступок тем, что должен сосредоточиться на лечении от наркозависимости. Вполне возможно, что Фьюри вновь решил пустить пыль в глаза широкой общественности. «Лента.ру» рассказывает о том, почему известный боксер отказался от двух чемпионских титулов.]]></description>
      <pubDate>Fri, 14 Oct 2016 02:20:10 +0300</pubDate>
      <category>Спорт</category>
    </item>
    <item>
      <title><![CDATA[Зидан стал послом гостеприимства Санкт-Петербурга]]></title>
      <link>#</link>
      <description><![CDATA[Главный тренер мадридского «Реала» Зинедин Зидан стал послом гостеприимства Санкт-Петербурга в преддверии чемпионата мира по футболу 2018 года, который пройдет в России. Об этом сообщает сайт Welcome2018.

Недавно 44-летний французский специалист и его супруга побывали в Петербурге с двухдневным визитом.]]></description>
      <pubDate>Fri, 14 Oct 2016 02:09:39 +0300</pubDate>
      <category>Спорт</category>
    </item>
    <item>
      <title><![CDATA[Украинская теннисистка Свитолина обыграла первую ракетку мира]]></title>
      <link>#</link>
      <description><![CDATA[На теннисном турнире в Китае украинка Элина Свитолина сенсационно победила первую ракетку мира Ангелину Кербер.]]></description>
      <pubDate>Fri, 07 Oct 2016 00:46:24 +0300</pubDate>
      <category>Спорт</category>
    </item>
    <item>
      <title><![CDATA[«Великолепная семерка»: старая история с новыми лицами]]></title>
      <link>#</link>
      <description><![CDATA[Городок на Диком Западе, оказавшийся возле золотого прииска, хочет забрать себе отвратительный капиталист (Питер Сарсгаард): его головорезы сжигают церковь, убивают несколько человек, а остальным дают три недели на сборы. Решительная молодая вдова (Хейли Беннетт) нанимает для защиты благородного охотника за головами (Дензел Вашингтон) — у которого, впрочем, свои счеты с капиталистом, — а тот собирает еще шестерых самоубийц. Это разбитной ирландец (Крис Пратт), мексиканский авантюрист (Мануэль Гарсия-Рульфо), легендарный стрелок-конфедерат (Итан Хоук), азиат со связкой ножей (Ли Бен Хон), индеец с луком (Мартин Сенсмейер) и набожный толстяк с топориком (Винсент ДʼОнофрио).

Резонно рассудив, что в такой истории ничего особенно не прибавишь и не убавишь, авторы новой «Семерки» не стали ломать голову над сюжетом: отличия от оригинала в этом смысле носят косметический и очень понятный характер. Мексиканскую деревню и мексиканских бандитов, когда-то подменивших средневековую Японию и самураев, превратили во внутриамериканский спор хозяйствующих субъектов, ввели боевую девушку с декольте, лидеру семерки дали дополнительную мотивацию помимо желания быть хорошим. А так все примерно по-прежнему — и даже могил в финале ровно столько же.

Основные нововведения касаются цвета кожи и разреза глаз: сейчас не 1960 год, чтобы добро представляли семеро белых мужчин. Кастинг, впрочем, совершенно не выглядит натянутой данью политкорректности — нынешний расклад и веселее, и, вероятно, реалистичнее (и мексиканца, например, играет мексиканец, а не бруклинский еврей). Расовая принадлежность героя Дензела Вашингтона в самом фильме вообще ни разу не комментируется, что по-своему очень изящно; на этой теме уже оттоптался Тарантино. Конечно, кореец тут все-таки для экзотики, но на Ли Бен Хона посмотреть всегда приятно; к тому же у него опыт вестернов («Хороший, плохой, долбанутый») странным образом побольше, чем у остальных звезд фильма.
]]></description>
      <pubDate>Fri, 07 Oct 2016 00:45:08 +0300</pubDate>
      <category>Культура</category>
    </item>
  </channel>
</rss>
```

***

### <a name="classRSS"></a> Класс (метод класса) создания RSS 
[Наверх](#Up)

Пример реализации rss ленты ООП-методами PHP: 

```php
<?php 
// RSS-ленту создаём с помощью DOM-дерева, с описанием создания файла, по примеру верхнего
// 1 - создаём класс:
class MyRSS
{
  // 1.1 - создаём константы для работы с xml-файлом ленты:
  const RSS_NAME = "rss.xml";
  const RSS_TITLE = "Новостная лента";
  const RSS_LINK = "http://test.ua/oop/news/news.php";

  // 2 - описываем метод создания RSS-ленты:
  protected function createRSS()
  {
    // 2.1 - создаём новый DOM-объект для создания ленты
    $dom = new DomDocument("1.0", "utf-8");
    
    // 2.1.1 - настраиваем внешний вид  отображения документа
    $dom->formatOutput = true;
    $dom->preserveWhiteSpace = false;
    
    // 2.2 - создаём новый элемент "rss"
    $rss = $dom->createElement("rss");
    
    // 2.3 - $dom->appendChild($rss);
    $dom->appendChild($rss);

    // 2.4 - добавляем атрибут второй версии в элемент rss
    $version = $dom->createAttribute("version");
    $version->value = '2.0';
    $rss->appendChild($version);

    // 2.5 - алалогично создаём элементы channel, title, link:
    $channel = $dom->createElement("channel");
    
    // 2.5.1 - при создании элементов title и link, мы сразу указываем описание,.
    //.. которое находится в константах RSS_TITLE и RSS_LINK
    $title = $dom->createElement("title", self::RSS_TITLE);
    $link = $dom->createElement("link", self::RSS_LINK);
    
    // 2.5.2 - помещаем элементы title и link под элемент channel:
    $channel->appendChild($title);
    $channel->appendChild($link);
    $rss->appendChild($channel);
    
    // 2.6 - получаем данных из БД, для последующего размещения в ленте:
    $lenta = $this->getNews();
    if(!$lenta) return false;
    
    // 2.7 - наполняем нашу rss-ленту, данными полученными из БД:
    foreach($lenta as $news)
    {
      // 2.7.1 - создаём xml-дерево из элементов title, category и др. 
      $item = $dom->createElement("item");

      $title = $dom->createElement("title");
      $cdata_title = $dom->createCDATASection($news['title']);
      $title->appendChild($cdata_title);

      $category = $dom->createElement("category", $news['category']);

      $desc = $dom->createElement("description");
      $cdata = $dom->createCDATASection($news['description']);
      $desc->appendChild($cdata);

      $link = $dom->createElement("link", "#");
      $dt = date("r", $news['datetime']);
      $pubDate = $dom->createElement("pubDate", $dt);

      $item->appendChild($title);
      $item->appendChild($link);
      $item->appendChild($desc);
      $item->appendChild($pubDate);
      $item->appendChild($category);
      $channel->appendChild($item);
    }
    
    // 2.8 - сохраняем полученное дерево в файле, указанном в константе RSS_NAME (rss.xml):
    $dom->save(self::RSS_NAME); 
  }
}
?>
```

